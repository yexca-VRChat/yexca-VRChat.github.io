---
title: FX 层 - 物品开关
weight: 4
slug: /editing/switch
---

{{% hint info %}}
**FX 层 - 物品开关**  
对 Base 层修改的例子，制作一个物品的开关，用于显示该物体，可以说是最灵活的修改
{{% /hint %}}

## 一、Unity添加“动画”窗口

在左上方“Window-动画-动画”即可打开动画器窗口，可拖动放至任意位置(如下方“控制台”窗口右边)

## 二、在模型上添加物品

如果是导入的物品，和角色类似，直接在”Assets“里找到prefab文件或fbx文件拖入即可

如果是Unity的物品(例如光源)，在左方”层级“右击选择即可(如”灯光-点光源“)
或者直接在模型名字上右击创建则只用调整位置即可

拖入场景后可先调整到合适的位置

然后再将左方”层级“中物品拖入模型的子集中（即拖到模型名字上，会自动归于模型下方）

此时移动模型此物体也会移动

## 三、录制物品打开动画

可以先在模型的文件夹里创建一个名为”动画“的文件夹方便管理，在”Assets“里的位置即为下一步创建动画默认位置，可提前进入此动画存放文件夹

左方”层级“选择模型，在”动画“窗口点击”创建“，选择一个位置并命名动画名字后点击”保存“

可以先将要打开物品关闭/隐藏(例如将创建的光源关闭)

在”动画“窗口左方”预览“右边有个红色实心圈，点击即可开始录制

此时再将要打开的物品打开/显示(例如将光源打开)

然后再次点击红色实心圈关闭录制，然后关闭预览，将右方”检查器“中模型的”控制器“删除(点击后按”delete“) ，回到”Assets“，可以将自动生成的控制器删除

## 四、将动画添加至FX层

### 1）打开模型FX层控制器

找到控制器所在位置点击即可在“动画器”窗口显示（可在左方点击模型名字后再在右方“VRC Avatar Descripor”找到FX层点击定位）

### 2）创建参数和图层

在”动画器“窗口点击”“参数”，然后点击右方的“+”，选择“Bool”，然后重命名(例如灯光)

然后点击“图层”，点击右方“+”，并重命名(例如灯光)，然后点击齿轮将权重改为1

### 3）图层的制作

点击刚刚新建的图层，在右方空白处右击“创建状态-空”，然后将刚刚录制的动画拖入(例如灯光)

此时在创建的空状态上右击“创建过度”然后鼠标移动到刚拖入的动画上左击

点击这条线，在右方“检查器”将“有退出时间”取消勾选，然后在“Conditions”右下点击加号，选择刚刚创建的参数(例如灯光)和值(例如“true”)

然后再创造一个从动画到空状态的过度，并且取消勾选“有退出时间”，在“Conditions”添加参数(例如灯光)和值(例如“false”)

## 五、将开关添加至菜单

### 1）添加数值

找到数值文件并点击即可在右方检查器显示(可在左方点击模型名字后再在右方“VRC Avatar Descripor”找到“Parameters”点击定位)

点击“Add”，在新加的一行输入“参数”名字与类型(例如灯光，Bool)，后方是默认值，最后为是否保存值(即切换模型再切换回来是否保留此物体状态，例如我勾选后，在游戏里打开了灯光没关，然后换了其他模型再换回来灯光还是开着的，未勾选则切换模型后会变回默认值)

**注意：此处参数名字要和刚刚在FX层控制器创建的参数名字相同，类型相同**

### 2）添加菜单

找到菜单文件并点击即可在右方检查器显示(可在左方点击模型名字后再在右方“VRC Avatar Descripor”找到“Menu”点击定位)

点击“Add Control” ，输入名字，类型选择“Toggle”，Parameter选择刚刚创建的参数(例如灯光)

## 六、简要概括-飞行

首先下载一个预制件：[飞行.prefab](https://raw.githubusercontent.com/yexca-VRChat/yexca-VRChat.github.io/main/file/飞行.zip)

1）将物品放入模型子集

2）录制物品开启动画

3）动画添加至FX层

4）添加至VRChat菜单和数值